<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>6&nbsp; Exam 1 Visualization Process – COMP/STAT112 Notebook</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../ica/ica-uni.html" rel="next">
<link href="../bw/bw-spatial.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="../style/custom.css">
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../bw/bw-uni.html">Best Work</a></li><li class="breadcrumb-item"><a href="../bw/bw-exam1.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Exam 1 Visualization Process</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Adele Fraser</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Best Work</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-uni.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Univariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-bi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Bivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-tri.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Trivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-quad.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Quadvariate (Multivariate) Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-spatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Spatial Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-exam1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Exam 1 Visualization Process</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">In-class Activities</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-uni.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Univariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-bi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Bivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-multi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Mulivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-spatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Spatial Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-effective.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Effective Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Wrangling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-dates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Dates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-reshaping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Reshaping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-joining.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Joining</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/quarto-demo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">My first Quarto document</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../bw/bw-uni.html">Best Work</a></li><li class="breadcrumb-item"><a href="../bw/bw-exam1.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Exam 1 Visualization Process</span></a></li></ol></nav><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">
<span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Exam 1 Visualization Process</span>
</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>This document is used to create a visualization working with the Food Consumption and CO2 Emissions dataset used in Week 8 of the year 2020 in the TidyTuesday project. The data includes four variables: <code>country</code>: A character variable with the country name of the observation. <code>food_category</code>: A character variable that tells what type of food category the observation is measuring <code>consumption</code>: A double variable that tells the consumption of the observation in kg/person/year <code>co2_emmission</code>: A double variable which tells the CO2 emission in kg/person/year of each observation.</p>
<p>The main question to answer throughout this exam and data exploration is “What does the consumption of each food category in each country look like?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidytuesdayR, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidytuesdayR' was built under R version 4.4.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">library</span>(tidyverse, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<p>Now we will create a dataset in our R workspace called <code>tuesdata</code> from the tidy tuesday dataset on the desired date. Then we load the file of interest into the fc dataset in our workspace.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>tuesdata <span class="ot">&lt;-</span> <span class="fu">tt_load</span>(<span class="st">'2020-02-18'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>---- Compiling #TidyTuesday Information for 2020-02-18 ----
--- There is 1 file available ---


── Downloading files ───────────────────────────────────────────────────────────

  1 of 1: "food_consumption.csv"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>fc <span class="ot">&lt;-</span> tuesdata<span class="sc">$</span>food_consumption</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="fu">head</span>(fc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country   food_category consumption co2_emmission
  &lt;chr&gt;     &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt;
1 Argentina Pork                10.5          37.2 
2 Argentina Poultry             38.7          41.5 
3 Argentina Beef                55.5        1712   
4 Argentina Lamb &amp; Goat          1.56         54.6 
5 Argentina Fish                 4.36          6.96
6 Argentina Eggs                11.4          10.5 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">dim</span>(fc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1430    4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">names</span>(fc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "country"       "food_category" "consumption"   "co2_emmission"</code></pre>
</div>
</div>
<p>Looking at the top and bottom 22 rows of data, we can determine the units of observation to be combinations of each of 11 food categories and each of 130 countries (determined using the <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code> command in the chunk above).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">head</span>(fc, <span class="dv">22</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22 × 4
   country   food_category            consumption co2_emmission
   &lt;chr&gt;     &lt;chr&gt;                          &lt;dbl&gt;         &lt;dbl&gt;
 1 Argentina Pork                           10.5          37.2 
 2 Argentina Poultry                        38.7          41.5 
 3 Argentina Beef                           55.5        1712   
 4 Argentina Lamb &amp; Goat                     1.56         54.6 
 5 Argentina Fish                            4.36          6.96
 6 Argentina Eggs                           11.4          10.5 
 7 Argentina Milk - inc. cheese            195.          278.  
 8 Argentina Wheat and Wheat Products      103.           19.7 
 9 Argentina Rice                            8.77         11.2 
10 Argentina Soybeans                        0             0   
# ℹ 12 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">tail</span>(fc, <span class="dv">22</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22 × 4
   country food_category            consumption co2_emmission
   &lt;chr&gt;   &lt;chr&gt;                          &lt;dbl&gt;         &lt;dbl&gt;
 1 Liberia Pork                            4.01         14.2 
 2 Liberia Poultry                         8.91          9.57
 3 Liberia Beef                            0.78         24.1 
 4 Liberia Lamb &amp; Goat                     0.48         16.8 
 5 Liberia Fish                            4.13          6.59
 6 Liberia Eggs                            2.05          1.88
 7 Liberia Milk - inc. cheese              3.04          4.33
 8 Liberia Wheat and Wheat Products       11.0           2.09
 9 Liberia Rice                           94.8         121.  
10 Liberia Soybeans                        0.63          0.28
# ℹ 12 more rows</code></pre>
</div>
</div>
<p>Now we can begin to explore some of our variables of interest with visualizations. What are our variables of interest? Because we want to know the distribution of food category consumption between countries, we are interested in <code>country</code>, <code>food_category</code>, and <code>consumption</code>. First, let’s see how many observations there are per country. We can do this by creating a bar chart, which will show how many rows in the dataset each country name corresponds to. The bar chart below shows that each country has 11 observed rows (or occurrences) in the dataset, corresponding to the 11 food categories possible.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">ggplot</span>(fc, <span class="fu">aes</span>(<span class="at">y =</span> country)) <span class="sc">+</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="bw-exam1_files/figure-html/CountryBarchart-1.png" class="img-fluid figure-img" width="480"></p>
</figure>
</div>
</div>
</div>
<p>Next, we can explore the food category variable, and see how many countries have listings for. Below we see that each food category has 130 observations, corresponding to the 130 countries in the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">ggplot</span>(fc, <span class="fu">aes</span>(<span class="at">y =</span> food_category)) <span class="sc">+</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">150</span>, <span class="at">by =</span> <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="bw-exam1_files/figure-html/CategoryBarChart-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>Finally for our exploration of unique variable of interest, we will create a density plot of the total per person consumption distributions across every food category in every country. We see that most of the observations of food categories and per person consumption in each country are just above 0, very low compared to some of the outliers, as we see small peaks just above 100 and even at 250 kg/person/year. Thinking critically, we might expect that most of the consumption categories, like soybeans, pork, and eggs, have very low numbers in most countries, whereas some of the broader categories like wheat and wheat products generally have much higher consumption rates across most countries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">ggplot</span>(fc, <span class="fu">aes</span>(<span class="at">x =</span> consumption)) <span class="sc">+</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">geom_density</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="bw-exam1_files/figure-html/ConsumptionDensity-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now we can move on to investigating two variables at once and how they relate to each other. We will start by comparing overall food consumption per person to the food category. The below, the faceted boxplots show us that the median of each the milk inc. cheese food category is much higher than the others, and that only wheat and wheat products comes in at a close second, with far fewer high outliers. The categories with visually the lowest median consumption rates are lamb &amp; goat, soybeans, and nuts inc. peanut butter. Looking at both the boxplots and the numerical summaries, both eggs and soybeans have relatively consistent rates of consumption across countries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">ggplot</span>(fc, <span class="fu">aes</span>(<span class="at">y =</span> consumption)) <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>food_category)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="bw-exam1_files/figure-html/FoodConsumptionPerCategory-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>fc <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">group_by</span>(food_category) <span class="sc">|&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>  <span class="fu">summarize</span>(<span class="fu">mean</span>(consumption), <span class="fu">max</span>(consumption), <span class="fu">min</span>(consumption))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 4
   food_category       `mean(consumption)` `max(consumption)` `min(consumption)`
   &lt;chr&gt;                             &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;
 1 Beef                             12.1                 55.5               0.78
 2 Eggs                              8.16                19.2               0.16
 3 Fish                             17.3                180.                0.24
 4 Lamb &amp; Goat                       2.60                21.1               0   
 5 Milk - inc. cheese              126.                 431.                3.04
 6 Nuts inc. Peanut B…               4.14                23.0               0.18
 7 Pork                             16.1                 67.1               0   
 8 Poultry                          21.2                 62.5               0.47
 9 Rice                             29.4                172.                0.95
10 Soybeans                          0.861               17.0               0   
11 Wheat and Wheat Pr…              71.5                198.                2.74</code></pre>
</div>
</div>
<p>A second bivariate visualization will explore the relationship between overall food consumption per person and the country variable. This chart shows the total kg/person/year consumed of all food categories combined. I have created a bar chart that arranges the countries on the y axis by the total consumption per year per person. We can see that Finland has the highest consumption total, followed by Lithuania and Sweden. The countries with the lowest total consumption per person per year are Zambia, Malawi, and Rwanda, with people only reporting to eat about 5-7 kg of food per year, at least of the categories of food listed here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>fc <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="fu">summarize</span>(<span class="at">total_consumption =</span> <span class="fu">sum</span>(consumption)) <span class="sc">|&gt;</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_consumption)) <span class="sc">|&gt;</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">fct_reorder</span>(country, total_consumption, <span class="at">.desc =</span> <span class="cn">FALSE</span>), <span class="at">x =</span> total_consumption)) <span class="sc">+</span></span>
<span id="cb23-6"><a href="#cb23-6"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="bw-exam1_files/figure-html/FoodConsumptionPerCountry-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>it is time to answer the main question of this data visualization process! We will use a heat map to visualize countries on the y axis, food catgories on the x axis, and a colored box to show the numerical variable in each box.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># Construct heatmap</span></span>
<span id="cb24-2"><a href="#cb24-2"></a></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="fu">library</span> (gplots)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'gplots'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:stats':

    lowess</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co">#| fig-height: 30</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="co">#| fig-width: 10</span></span>
<span id="cb27-3"><a href="#cb27-3"></a></span>
<span id="cb27-4"><a href="#cb27-4"></a>fc_wide <span class="ot">&lt;-</span> fc <span class="sc">|&gt;</span></span>
<span id="cb27-5"><a href="#cb27-5"></a>  <span class="fu">mutate</span>(<span class="at">food_category =</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, food_category)) <span class="sc">|&gt;</span></span>
<span id="cb27-6"><a href="#cb27-6"></a>  <span class="fu">mutate</span>(<span class="at">food_category =</span> <span class="fu">gsub</span>(<span class="st">"&amp;"</span>, <span class="st">"and"</span>, food_category)) <span class="sc">|&gt;</span></span>
<span id="cb27-7"><a href="#cb27-7"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"food_category"</span>, <span class="at">values_from =</span> <span class="st">"consumption"</span>)</span>
<span id="cb27-8"><a href="#cb27-8"></a></span>
<span id="cb27-9"><a href="#cb27-9"></a></span>
<span id="cb27-10"><a href="#cb27-10"></a>fc_wide <span class="ot">&lt;-</span> fc_wide <span class="sc">|&gt;</span></span>
<span id="cb27-11"><a href="#cb27-11"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb27-12"><a href="#cb27-12"></a>  <span class="fu">summarize</span>(<span class="at">Poultry =</span> <span class="fu">median</span>(Poultry, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-13"><a href="#cb27-13"></a>            <span class="at">Pork =</span> <span class="fu">median</span>(Pork, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-14"><a href="#cb27-14"></a>            <span class="at">Beef =</span> <span class="fu">median</span>(Beef, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-15"><a href="#cb27-15"></a>            <span class="at">Lamb_and_Goat =</span> <span class="fu">median</span>(Lamb_and_Goat, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-16"><a href="#cb27-16"></a>            <span class="at">Fish =</span> <span class="fu">median</span>(Fish, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-17"><a href="#cb27-17"></a>            <span class="at">Eggs =</span> <span class="fu">median</span>(Eggs, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-18"><a href="#cb27-18"></a>            <span class="st">`</span><span class="at">Milk_-_inc._cheese</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">Milk_-_inc._cheese</span><span class="st">`</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-19"><a href="#cb27-19"></a>            <span class="at">Wheat_and_Wheat_Products =</span> <span class="fu">median</span>(Wheat_and_Wheat_Products, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-20"><a href="#cb27-20"></a>            <span class="at">Rice =</span> <span class="fu">median</span>(Rice, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-21"><a href="#cb27-21"></a>            <span class="at">Soybeans =</span> <span class="fu">median</span>(Soybeans, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-22"><a href="#cb27-22"></a>            <span class="st">`</span><span class="at">Nuts_-_inc._pb</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">Nuts_inc._Peanut_Butter</span><span class="st">`</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb27-23"><a href="#cb27-23"></a></span>
<span id="cb27-24"><a href="#cb27-24"></a></span>
<span id="cb27-25"><a href="#cb27-25"></a>plot_data <span class="ot">&lt;-</span> fc_wide <span class="sc">|&gt;</span> </span>
<span id="cb27-26"><a href="#cb27-26"></a>  <span class="fu">column_to_rownames</span>(<span class="st">"country"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb27-27"><a href="#cb27-27"></a>  <span class="fu">data.matrix</span>()</span>
<span id="cb27-28"><a href="#cb27-28"></a></span>
<span id="cb27-29"><a href="#cb27-29"></a><span class="fu">head</span>(plot_data) <span class="co"># This shows us that we have successfully restructured the data so that it is ready to be put in a heatmap</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Poultry  Pork  Beef Lamb_and_Goat  Fish  Eggs Milk_-_inc._cheese
Albania     13.23 10.88 22.50         15.32  3.85 12.45             303.72
Algeria      7.42  0.00  5.60          7.69  3.74  8.06             141.53
Angola      17.33  8.89  8.42          1.08 15.24  1.11              12.30
Argentina   38.66 10.51 55.48          1.56  4.36 11.39             195.08
Armenia     13.35  9.67 19.66          3.02  4.36 11.69             209.03
Australia   46.12 24.14 33.86          9.87 17.69  8.51             234.49
          Wheat_and_Wheat_Products  Rice Soybeans Nuts_-_inc._pb
Albania                     138.64  7.78     0.00           4.36
Algeria                     185.42  2.97     0.00           2.08
Angola                       40.72  8.12     0.52           2.26
Argentina                   103.11  8.77     0.00           0.49
Armenia                     130.60  3.18     0.00           2.55
Australia                    70.46 11.03     0.19           8.73</code></pre>
</div>
</div>
<p>Below is that actual code answer the main question addressed in this exploration of data. How does food consumption vary across countries and food categories? This heatmap easily allows us to see some outliers in the trends, which are noticeable by the bright yellow squares on the heatmap. For example, the United Arab Emirates has a relatively high per person annual consumption of nuts and peanut butter, as do Hong Kong and the Maldives, among others. The brightest sections (highest consumption value) on the map is for fish consumption in the Maldives. I’ve added another section of code that lets us see that the actual number per person per year of fish consumed in the Maldives is 179.71 kg. Another very bright spot on the chart, which is an outlier, is the intersection of the soybeans category and Taiwan, showing that those in Taiwan eat a relatively large number of soybeans on average. Another interesting trend that we can see is that most of the European countries eat less rice than the asian countries. This separation occurs as a result of the clustering that the heatmap function allows us to do. Asian countries such as Vietnam, Bangladesh, and Cambodia eat more rice on average per person than countries like Luxembourg, France, and Norway.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">heatmap.2</span>(plot_data,</span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="at">dendrogram =</span> <span class="st">"none"</span>,</span>
<span id="cb29-3"><a href="#cb29-3"></a>  <span class="at">Rowv =</span> <span class="cn">TRUE</span>,</span>
<span id="cb29-4"><a href="#cb29-4"></a>  <span class="at">scale =</span> <span class="st">"column"</span>,</span>
<span id="cb29-5"><a href="#cb29-5"></a>  <span class="at">keysize =</span> <span class="fl">0.7</span>,</span>
<span id="cb29-6"><a href="#cb29-6"></a>  <span class="at">density.info =</span> <span class="st">"none"</span>,</span>
<span id="cb29-7"><a href="#cb29-7"></a>  <span class="at">col =</span> <span class="fu">hcl.colors</span>(<span class="dv">256</span>),</span>
<span id="cb29-8"><a href="#cb29-8"></a>  <span class="at">margins =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">10</span>),</span>
<span id="cb29-9"><a href="#cb29-9"></a>  <span class="at">cexRow =</span> <span class="dv">1</span>, <span class="at">cexCol =</span> <span class="dv">1</span>,</span>
<span id="cb29-10"><a href="#cb29-10"></a>  <span class="at">sepcolor =</span> <span class="st">"white"</span>, <span class="at">trace =</span> <span class="st">"none"</span>,</span>
<span id="cb29-11"><a href="#cb29-11"></a>  <span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb29-12"><a href="#cb29-12"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="bw-exam1_files/figure-html/HeatMapMaking-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>fc_wide <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Maldives"</span>) <span class="sc">|&gt;</span></span>
<span id="cb30-3"><a href="#cb30-3"></a>  <span class="fu">select</span>(Fish, country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
   Fish country 
  &lt;dbl&gt; &lt;chr&gt;   
1  180. Maldives</code></pre>
</div>
</div>


<!-- -->


</main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../bw/bw-spatial.html" class="pagination-link" aria-label="Spatial Viz">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Spatial Viz</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../ica/ica-uni.html" class="pagination-link" aria-label="Univariate Viz">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Univariate Viz</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb32" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb32-1"><a href="#cb32-1"></a><span class="co">---</span></span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="an">title:</span><span class="co"> "Exam 1 Visualization Process"</span></span>
<span id="cb32-3"><a href="#cb32-3"></a><span class="an">format:</span><span class="co"> html</span></span>
<span id="cb32-4"><a href="#cb32-4"></a><span class="co">---</span></span>
<span id="cb32-5"><a href="#cb32-5"></a></span>
<span id="cb32-6"><a href="#cb32-6"></a>This document is used to create a visualization working with the Food Consumption and CO2 Emissions dataset used in Week 8 of the year 2020 in the TidyTuesday project. The data includes four variables:</span>
<span id="cb32-7"><a href="#cb32-7"></a><span class="in">`country`</span>: A character variable with the country name of the observation.</span>
<span id="cb32-8"><a href="#cb32-8"></a><span class="in">`food_category`</span>: A character variable that tells what type of food category the observation is measuring</span>
<span id="cb32-9"><a href="#cb32-9"></a><span class="in">`consumption`</span>: A double variable that tells the consumption of the observation in kg/person/year</span>
<span id="cb32-10"><a href="#cb32-10"></a><span class="in">`co2_emmission`</span>: A double variable which tells the CO2 emission in kg/person/year of each observation.</span>
<span id="cb32-11"><a href="#cb32-11"></a></span>
<span id="cb32-12"><a href="#cb32-12"></a>The main question to answer throughout this exam and data exploration is "What does the consumption of each food category in each country look like?</span>
<span id="cb32-13"><a href="#cb32-13"></a></span>
<span id="cb32-14"><a href="#cb32-14"></a><span class="in">```{r LoadPackages}</span></span>
<span id="cb32-15"><a href="#cb32-15"></a><span class="in">library(tidytuesdayR, quietly = TRUE)</span></span>
<span id="cb32-16"><a href="#cb32-16"></a><span class="in">library(tidyverse, quietly = TRUE)</span></span>
<span id="cb32-17"><a href="#cb32-17"></a><span class="in">```</span></span>
<span id="cb32-18"><a href="#cb32-18"></a></span>
<span id="cb32-19"><a href="#cb32-19"></a>Now we will create a dataset in our R workspace called <span class="in">`tuesdata`</span> from the tidy tuesday dataset on the desired date. Then we load the file of interest into the fc dataset in our workspace.</span>
<span id="cb32-20"><a href="#cb32-20"></a></span>
<span id="cb32-21"><a href="#cb32-21"></a><span class="in">```{r LoadData}</span></span>
<span id="cb32-22"><a href="#cb32-22"></a><span class="in">tuesdata &lt;- tt_load('2020-02-18')</span></span>
<span id="cb32-23"><a href="#cb32-23"></a><span class="in">fc &lt;- tuesdata$food_consumption</span></span>
<span id="cb32-24"><a href="#cb32-24"></a></span>
<span id="cb32-25"><a href="#cb32-25"></a><span class="in">head(fc)</span></span>
<span id="cb32-26"><a href="#cb32-26"></a></span>
<span id="cb32-27"><a href="#cb32-27"></a><span class="in">dim(fc)</span></span>
<span id="cb32-28"><a href="#cb32-28"></a></span>
<span id="cb32-29"><a href="#cb32-29"></a><span class="in">names(fc)</span></span>
<span id="cb32-30"><a href="#cb32-30"></a><span class="in">```</span></span>
<span id="cb32-31"><a href="#cb32-31"></a></span>
<span id="cb32-32"><a href="#cb32-32"></a>Looking at the top and bottom 22 rows of data, we can determine the units of observation to be combinations of each of 11 food categories and each of 130 countries (determined using the <span class="in">`dim()`</span> command in the chunk above).</span>
<span id="cb32-33"><a href="#cb32-33"></a><span class="in">```{r HeadAndTail}</span></span>
<span id="cb32-34"><a href="#cb32-34"></a><span class="in">head(fc, 22)</span></span>
<span id="cb32-35"><a href="#cb32-35"></a></span>
<span id="cb32-36"><a href="#cb32-36"></a><span class="in">tail(fc, 22)</span></span>
<span id="cb32-37"><a href="#cb32-37"></a><span class="in">```</span></span>
<span id="cb32-38"><a href="#cb32-38"></a></span>
<span id="cb32-39"><a href="#cb32-39"></a>Now we can begin to explore some of our variables of interest with visualizations. What are our variables of interest? Because we want to know the distribution of food category consumption between countries, we are interested in <span class="in">`country`</span>, <span class="in">`food_category`</span>, and <span class="in">`consumption`</span>. First, let's see how many observations there are per country. We can do this by creating a bar chart, which will show how many rows in the dataset each country name corresponds to. The bar chart below shows that each country has 11 observed rows (or occurrences) in the dataset, corresponding to the 11 food categories possible.</span>
<span id="cb32-40"><a href="#cb32-40"></a></span>
<span id="cb32-41"><a href="#cb32-41"></a><span class="in">```{r CountryBarchart}</span></span>
<span id="cb32-42"><a href="#cb32-42"></a><span class="in">#| fig-height: 20</span></span>
<span id="cb32-43"><a href="#cb32-43"></a><span class="in">#| fig-width: 5</span></span>
<span id="cb32-44"><a href="#cb32-44"></a></span>
<span id="cb32-45"><a href="#cb32-45"></a><span class="in">ggplot(fc, aes(y = country)) +</span></span>
<span id="cb32-46"><a href="#cb32-46"></a><span class="in">  geom_bar()</span></span>
<span id="cb32-47"><a href="#cb32-47"></a><span class="in">```</span></span>
<span id="cb32-48"><a href="#cb32-48"></a>Next, we can explore the food category variable, and see how many countries have listings for. Below we see that each food category has 130 observations, corresponding to the 130 countries in the dataset.</span>
<span id="cb32-49"><a href="#cb32-49"></a><span class="in">```{r CategoryBarChart}</span></span>
<span id="cb32-50"><a href="#cb32-50"></a><span class="in">#| fig-height: 3</span></span>
<span id="cb32-51"><a href="#cb32-51"></a><span class="in">#| fig-width: 10</span></span>
<span id="cb32-52"><a href="#cb32-52"></a></span>
<span id="cb32-53"><a href="#cb32-53"></a><span class="in">ggplot(fc, aes(y = food_category)) +</span></span>
<span id="cb32-54"><a href="#cb32-54"></a><span class="in">  geom_bar() +</span></span>
<span id="cb32-55"><a href="#cb32-55"></a><span class="in">  scale_x_continuous(breaks = seq(0, 150, by = 10))</span></span>
<span id="cb32-56"><a href="#cb32-56"></a><span class="in">```</span></span>
<span id="cb32-57"><a href="#cb32-57"></a></span>
<span id="cb32-58"><a href="#cb32-58"></a>Finally for our exploration of unique variable of interest, we will create a density plot of the total per person consumption distributions across every food category in every country. We see that most of the observations of food categories and per person consumption in each country are just above 0, very low compared to some of the outliers, as we see small peaks just above 100 and even at 250 kg/person/year. Thinking critically, we might expect that most of the consumption categories, like soybeans, pork, and eggs, have very low numbers in most countries, whereas some of the broader categories like wheat and wheat products generally have much higher consumption rates across most countries.</span>
<span id="cb32-59"><a href="#cb32-59"></a><span class="in">```{r ConsumptionDensity}</span></span>
<span id="cb32-60"><a href="#cb32-60"></a><span class="in">ggplot(fc, aes(x = consumption)) +</span></span>
<span id="cb32-61"><a href="#cb32-61"></a><span class="in">  geom_density()</span></span>
<span id="cb32-62"><a href="#cb32-62"></a><span class="in">```</span></span>
<span id="cb32-63"><a href="#cb32-63"></a></span>
<span id="cb32-64"><a href="#cb32-64"></a></span>
<span id="cb32-65"><a href="#cb32-65"></a>Now we can move on to investigating two variables at once and how they relate to each other. We will start by comparing overall food consumption per person to the food category. The below, the faceted boxplots show us that the median of each the milk inc. cheese food category is much higher than the others, and that only wheat and wheat products comes in at a close second, with far fewer high outliers. The categories with visually the lowest median consumption rates are lamb &amp; goat, soybeans, and nuts inc. peanut butter. Looking at both the boxplots and the numerical summaries, both eggs and soybeans have relatively consistent rates of consumption across countries.</span>
<span id="cb32-66"><a href="#cb32-66"></a><span class="in">```{r FoodConsumptionPerCategory}</span></span>
<span id="cb32-67"><a href="#cb32-67"></a><span class="in">#| fig-height: 8</span></span>
<span id="cb32-68"><a href="#cb32-68"></a><span class="in">#| fig-width: 7</span></span>
<span id="cb32-69"><a href="#cb32-69"></a><span class="in">ggplot(fc, aes(y = consumption)) +</span></span>
<span id="cb32-70"><a href="#cb32-70"></a><span class="in">  geom_boxplot() +</span></span>
<span id="cb32-71"><a href="#cb32-71"></a><span class="in">  facet_wrap(~food_category)</span></span>
<span id="cb32-72"><a href="#cb32-72"></a></span>
<span id="cb32-73"><a href="#cb32-73"></a><span class="in">fc |&gt;</span></span>
<span id="cb32-74"><a href="#cb32-74"></a><span class="in">  group_by(food_category) |&gt;</span></span>
<span id="cb32-75"><a href="#cb32-75"></a><span class="in">  summarize(mean(consumption), max(consumption), min(consumption))</span></span>
<span id="cb32-76"><a href="#cb32-76"></a></span>
<span id="cb32-77"><a href="#cb32-77"></a><span class="in">```</span></span>
<span id="cb32-78"><a href="#cb32-78"></a></span>
<span id="cb32-79"><a href="#cb32-79"></a>A second bivariate visualization will explore the relationship between overall food consumption per person and the country variable. This chart shows the total kg/person/year consumed of all food categories combined. I have created a bar chart that arranges the countries on the y axis by the total consumption per year per person. We can see that Finland has the highest consumption total, followed by Lithuania and Sweden. The countries with the lowest total consumption per person per year are Zambia, Malawi, and Rwanda, with people only reporting to eat about 5-7 kg of food per year, at least of the categories of food listed here.</span>
<span id="cb32-80"><a href="#cb32-80"></a></span>
<span id="cb32-81"><a href="#cb32-81"></a><span class="in">```{r FoodConsumptionPerCountry}</span></span>
<span id="cb32-82"><a href="#cb32-82"></a><span class="in">#| fig-height: 30</span></span>
<span id="cb32-83"><a href="#cb32-83"></a><span class="in">#| fig-width: 10</span></span>
<span id="cb32-84"><a href="#cb32-84"></a></span>
<span id="cb32-85"><a href="#cb32-85"></a></span>
<span id="cb32-86"><a href="#cb32-86"></a><span class="in">fc |&gt;</span></span>
<span id="cb32-87"><a href="#cb32-87"></a><span class="in">  group_by(country) |&gt;</span></span>
<span id="cb32-88"><a href="#cb32-88"></a><span class="in">  summarize(total_consumption = sum(consumption)) |&gt;</span></span>
<span id="cb32-89"><a href="#cb32-89"></a><span class="in">  arrange(desc(total_consumption)) |&gt;</span></span>
<span id="cb32-90"><a href="#cb32-90"></a><span class="in">  ggplot( aes(y = fct_reorder(country, total_consumption, .desc = FALSE), x = total_consumption)) +</span></span>
<span id="cb32-91"><a href="#cb32-91"></a><span class="in">  geom_bar(stat = "identity")</span></span>
<span id="cb32-92"><a href="#cb32-92"></a></span>
<span id="cb32-93"><a href="#cb32-93"></a><span class="in">```</span></span>
<span id="cb32-94"><a href="#cb32-94"></a></span>
<span id="cb32-95"><a href="#cb32-95"></a>it is time to answer the main question of this data visualization process! We will use a heat map to visualize countries on the y axis, food catgories on the x axis, and a colored box to show the numerical variable in each box.</span>
<span id="cb32-96"><a href="#cb32-96"></a></span>
<span id="cb32-97"><a href="#cb32-97"></a><span class="in">```{r HeatMapWrangling}</span></span>
<span id="cb32-98"><a href="#cb32-98"></a><span class="in"># Construct heatmap</span></span>
<span id="cb32-99"><a href="#cb32-99"></a></span>
<span id="cb32-100"><a href="#cb32-100"></a><span class="in">library (gplots)</span></span>
<span id="cb32-101"><a href="#cb32-101"></a></span>
<span id="cb32-102"><a href="#cb32-102"></a></span>
<span id="cb32-103"><a href="#cb32-103"></a><span class="in">#| fig-height: 30</span></span>
<span id="cb32-104"><a href="#cb32-104"></a><span class="in">#| fig-width: 10</span></span>
<span id="cb32-105"><a href="#cb32-105"></a></span>
<span id="cb32-106"><a href="#cb32-106"></a><span class="in">fc_wide &lt;- fc |&gt;</span></span>
<span id="cb32-107"><a href="#cb32-107"></a><span class="in">  mutate(food_category = gsub(" ", "_", food_category)) |&gt;</span></span>
<span id="cb32-108"><a href="#cb32-108"></a><span class="in">  mutate(food_category = gsub("&amp;", "and", food_category)) |&gt;</span></span>
<span id="cb32-109"><a href="#cb32-109"></a><span class="in">  pivot_wider(names_from = "food_category", values_from = "consumption")</span></span>
<span id="cb32-110"><a href="#cb32-110"></a></span>
<span id="cb32-111"><a href="#cb32-111"></a></span>
<span id="cb32-112"><a href="#cb32-112"></a><span class="in">fc_wide &lt;- fc_wide |&gt;</span></span>
<span id="cb32-113"><a href="#cb32-113"></a><span class="in">  group_by(country) |&gt;</span></span>
<span id="cb32-114"><a href="#cb32-114"></a><span class="in">  summarize(Poultry = median(Poultry, na.rm = TRUE),</span></span>
<span id="cb32-115"><a href="#cb32-115"></a><span class="in">            Pork = median(Pork, na.rm = TRUE),</span></span>
<span id="cb32-116"><a href="#cb32-116"></a><span class="in">            Beef = median(Beef, na.rm = TRUE),</span></span>
<span id="cb32-117"><a href="#cb32-117"></a><span class="in">            Lamb_and_Goat = median(Lamb_and_Goat, na.rm = TRUE),</span></span>
<span id="cb32-118"><a href="#cb32-118"></a><span class="in">            Fish = median(Fish, na.rm = TRUE),</span></span>
<span id="cb32-119"><a href="#cb32-119"></a><span class="in">            Eggs = median(Eggs, na.rm = TRUE),</span></span>
<span id="cb32-120"><a href="#cb32-120"></a><span class="in">            `Milk_-_inc._cheese` = median(`Milk_-_inc._cheese`, na.rm = TRUE),</span></span>
<span id="cb32-121"><a href="#cb32-121"></a><span class="in">            Wheat_and_Wheat_Products = median(Wheat_and_Wheat_Products, na.rm = TRUE),</span></span>
<span id="cb32-122"><a href="#cb32-122"></a><span class="in">            Rice = median(Rice, na.rm = TRUE),</span></span>
<span id="cb32-123"><a href="#cb32-123"></a><span class="in">            Soybeans = median(Soybeans, na.rm = TRUE),</span></span>
<span id="cb32-124"><a href="#cb32-124"></a><span class="in">            `Nuts_-_inc._pb` = median(`Nuts_inc._Peanut_Butter`, na.rm = TRUE))</span></span>
<span id="cb32-125"><a href="#cb32-125"></a></span>
<span id="cb32-126"><a href="#cb32-126"></a></span>
<span id="cb32-127"><a href="#cb32-127"></a><span class="in">plot_data &lt;- fc_wide |&gt; </span></span>
<span id="cb32-128"><a href="#cb32-128"></a><span class="in">  column_to_rownames("country") |&gt; </span></span>
<span id="cb32-129"><a href="#cb32-129"></a><span class="in">  data.matrix()</span></span>
<span id="cb32-130"><a href="#cb32-130"></a></span>
<span id="cb32-131"><a href="#cb32-131"></a><span class="in">head(plot_data) # This shows us that we have successfully restructured the data so that it is ready to be put in a heatmap</span></span>
<span id="cb32-132"><a href="#cb32-132"></a><span class="in">```</span></span>
<span id="cb32-133"><a href="#cb32-133"></a>Below is that actual code answer the main question addressed in this exploration of data. How does food consumption vary across countries and food categories? This heatmap easily allows us to see some outliers in the trends, which are noticeable by the bright yellow squares on the heatmap. For example, the United Arab Emirates has a relatively high per person annual consumption of nuts and peanut butter, as do Hong Kong and the Maldives, among others. The brightest sections (highest consumption value) on the map is for fish consumption in the Maldives. I've added another section of code that lets us see that the actual number per person per year of fish consumed in the Maldives is 179.71 kg. Another very bright spot on the chart, which is an outlier, is the intersection of the soybeans category and Taiwan, showing that those in Taiwan eat a relatively large number of soybeans on average. Another interesting trend that we can see is that most of the European countries eat less rice than the asian countries. This separation occurs as a result of the clustering that the heatmap function allows us to do. Asian countries such as Vietnam, Bangladesh, and Cambodia eat more rice on average per person than countries like Luxembourg, France, and Norway.</span>
<span id="cb32-134"><a href="#cb32-134"></a></span>
<span id="cb32-135"><a href="#cb32-135"></a><span class="in">```{r HeatMapMaking}</span></span>
<span id="cb32-136"><a href="#cb32-136"></a><span class="in">#| fig-height: 31</span></span>
<span id="cb32-137"><a href="#cb32-137"></a><span class="in">#| fig-width: 7</span></span>
<span id="cb32-138"><a href="#cb32-138"></a><span class="in">heatmap.2(plot_data,</span></span>
<span id="cb32-139"><a href="#cb32-139"></a><span class="in">  dendrogram = "none",</span></span>
<span id="cb32-140"><a href="#cb32-140"></a><span class="in">  Rowv = TRUE,</span></span>
<span id="cb32-141"><a href="#cb32-141"></a><span class="in">  scale = "column",</span></span>
<span id="cb32-142"><a href="#cb32-142"></a><span class="in">  keysize = 0.7,</span></span>
<span id="cb32-143"><a href="#cb32-143"></a><span class="in">  density.info = "none",</span></span>
<span id="cb32-144"><a href="#cb32-144"></a><span class="in">  col = hcl.colors(256),</span></span>
<span id="cb32-145"><a href="#cb32-145"></a><span class="in">  margins = c(10, 10),</span></span>
<span id="cb32-146"><a href="#cb32-146"></a><span class="in">  cexRow = 1, cexCol = 1,</span></span>
<span id="cb32-147"><a href="#cb32-147"></a><span class="in">  sepcolor = "white", trace = "none",</span></span>
<span id="cb32-148"><a href="#cb32-148"></a><span class="in">  par(mar = c(4, 1, 1, 1))</span></span>
<span id="cb32-149"><a href="#cb32-149"></a><span class="in">)</span></span>
<span id="cb32-150"><a href="#cb32-150"></a></span>
<span id="cb32-151"><a href="#cb32-151"></a><span class="in">fc_wide |&gt;</span></span>
<span id="cb32-152"><a href="#cb32-152"></a><span class="in">  filter(country == "Maldives") |&gt;</span></span>
<span id="cb32-153"><a href="#cb32-153"></a><span class="in">  select(Fish, country)</span></span>
<span id="cb32-154"><a href="#cb32-154"></a></span>
<span id="cb32-155"><a href="#cb32-155"></a><span class="in">```</span></span>
<span id="cb32-156"><a href="#cb32-156"></a></span>
<span id="cb32-157"><a href="#cb32-157"></a></span>
<span id="cb32-158"><a href="#cb32-158"></a></span>
<span id="cb32-159"><a href="#cb32-159"></a></span>
<span id="cb32-160"><a href="#cb32-160"></a></span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>